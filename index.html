<!DOCTYPE HTML>

<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		
		<link rel="stylesheet" type="text/css" href="css/theme.css">
		<link rel="stylesheet" type="text/css" href="css/scrollz.css">
		<link href="font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet">
		
		<script type="text/javascript" charset="utf-8" src="phonegap-1.3.0.js"></script>

		
		<script src="js/jquery-2.1.1.min.js"></script>
		<script src="js/swipe.js"></script>
		<script src="js/scrollz.js"></script>
		
		<script type="text/javascript">

		
</script>


	</head>
	
	<body>
		<div class="header_demo">
			<h3>Appriz Demo</h3>
		</div>
		
		<div class="principal_menu">
			<i class="fa fa-university active fa-fw" div="entity_tab"></i>
			<i class="fa fa-envelope-o  fa-fw"	div="message_tab" iconp="filter"></i>
			<i class="fa fa-flask fa-fw" div="github_tab"></i>
			<i class="fa fa-cogs fa-fw" div="config_tab"></i>
		</div>
		
		
		<div id='entity_tab' class='view active' style='text-align:center;'>
			<img src='img/icono-appriz.png' class='appriz_logo'/>
			<br>APPRIZ(R) 2014. Demo mobile API.</br>
		</div>
		
		<div id='message_tab' class='view'>
		
		</div>
		
		<div id='github_tab' class='view'>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message unread' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message unread' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message unread' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message unread' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message unread' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message unread' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message unread' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message unread' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message unread' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message unread' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message unread' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div class='message unread' id='' longMSG="dead text bllblblba lbnlblb lblblb 00001"><img src='img/ic_90_iPhone_ios7_myalerts.png'/><table><tr><td>Shor message go here</td></tr><tr><td><i class="fa fa-calendar"></i>12 jun 2014 16:00:00</td></tr></table></div>
			
		</div>
		
		<div id='config_tab' class='view'>
			config tab
		</div>
		
		<div id='detail_msg' class='view' iconp="back">
			<p style="text-align: center; color: #1A73B6" id='shortMSG'> Hola mi nombre es juagreda</p>
			<p style="text-align: justify; color: #000" id='longMSG'> Hola mi nombre es juagreda</p>
			<hr>
			
		</div>
		<div class='vertical_menu'>
			<ul>
				
				<li><img src='img/ic_90_iPhone_ios7_myalerts.png'/><div>My Alerts</div> <i class="fa fa-check-square-o"></i></li>
				<li><img src='img/ic_90_iPhone_ios7_alerts.png'/><div>Alerts</div> <i class="fa fa-check-square-o"></i></li>
				<li><img src='img/ic_90_iPhone_ios7_notific.png'/><div>Notifications</div> <i class="fa fa-check-square-o"></i></li>
				<li><img src='img/ic_90_iPhone_ios7_publicidad.png'/><div>Promotions</div> <i class="fa fa-check-square-o"></i></li>
		
				<li ><img src='img/FFFFFF-1.png'/><div>Read </div> <i class="fa fa-check-square-o"></i></li>
				<li><img src='img/FFFFFF-1.png'/><div>Unread</div> <i class="fa fa-check-square-o"></i> </li>
				<li style='background-color: #7878AE !important; text-align: center; color: white;' class='close_filter'>Close Filter</li>
			</ul>
		</div>
		
		
		
		<i class="fa fa-arrow-circle-o-left iconp"></i>
		<i class="fa fa-filter iconp" id='filter'></i>
	</body>
	
	<script>
	
		//-------------------------------------------------------//
		//                 		 API USE						 //
		//-------------------------------------------------------//
		
		//bring message for this client
		$.post('http://10.60.0.75:8089/appriz/getMessagesByClient',{"idSecretClient": "rtLtgs9/+XnHhJy/RFq+xd7IRq0u3mJAg2hCajq2PlB7RRNQfiWEKHqGsWzJenslrcjNmZsLxyNWzvMilTq+4OzhHd5R/BToS7r58U26ysM5J7ONqAUpIPFRwkLgPcDhNcbiNaWkGfJGIAPYO1WD7ANEH5FuaODW39WeWJiJdaeJ+WJc9X7EltQqTkuxTUU8z2SOWceVvxhn6Hod85Y0hw=="},function(data){
			alert(JSON.stringify(data));
			$.each(data,function(index, message){
				
			
				var img_msg = message['type'] == 1 ? "img/ic_90_iPhone_ios7_myalerts.png"  : message['type'] == 2 ? "img/ic_90_iPhone_ios7_alerts.png" : message['type'] == 3 ? "img/ic_90_iPhone_ios7_notific.png" : "img/ic_90_iPhone_ios7_publicidad.png";
					$('#message_tab').append("<div class='delete_indicator'>Delete&nbsp;&nbsp; </div><div  class='message unread' id='"+message['idMessage']+"' longMSG='"+message['longMessage']+"'><img src='"+img_msg+"'/><table><tr><td>"+message['shortMessage']+"</td></tr><tr><td><i class='fa fa-calendar'></i>12 jun 2014 16:00:00</td></tr></table></div>");
					
			});
		},'json') .fail(function(e) {
			alert( JSON.stringify(e));
		}).done(function(){makeSwipe(); alert('hola')});
		
		//-------------------------------------------------------//
		// 					GUI AND GENERIC FUNCTIONS            //
		//------------------------------------------------------//
		
		
		//hide & helpers all views
		$('.view').hide();
		$('.iconp').hide();
		$('.vertical_menu').hide();
		
		//Show first view
		$('.view.active').show();
		
		//NAVEGATION BAR
		$('.principal_menu .fa').click(function(){
			$('.principal_menu .fa.active').removeClass('active');
			$(this).addClass('active');
			$('.view.active').hide().removeClass('active');
			
			$('#'+$(this).attr('div')).show().addClass('active');
			
			$('.iconp').hide();
			$('#'+$(this).attr('iconp')+'.iconp').show();
			$('.vertical_menu').hide();
			$('.vertical_menu').hide();
			$('#detail_msg').hide();
		})
		
		
	
		
		//Back from detail msg to list
			$(".fa.fa-arrow-circle-o-left.iconp").click(function(){
				$(this).hide();
				$('#detail_msg').hide();
				
			});
		
		
		//swip for delete message
		function makeSwipe(){
			$(".message").swipe( {
				
				//Generic swipe handler for all directions
				swipe:function(event, direction, distance, duration, fingerCount, fingerData) {
					var msg = $(this);msg.prev().css({"width":  0});
					msg.css({"margin-left": 0});
					if(direction=='right' & distance > 250){msg.remove(); } else {msg.css({"margin-left": 0}) ;} 
					
				},
				
				swipeStatus:function(event, phase, direction, distance , duration , fingerCount) {
					var msg = $(this);
					if(direction=='right'){
						msg.css({"margin-left": distance});
						msg.prev().css({"width":  distance-1});
						
						if (distance< 250) {
							msg.prev().css({"background-color":  "#FDC111"});
						}else{
							msg.prev().css({"background-color":  "#FF3553"});
						}
					}
					else if(direction=='down') {
						
						if(msg.parent().scrollTop() < 1){alert('update list;')}
						msg.parent().scrollTop(msg.parent().scrollTop - distance)
					
					}
				   
				   if((phase === $.fn.swipe.phases.PHASE_END || phase === $.fn.swipe.phases.PHASE_CANCEL )& distance == 0)  {
						//read message
						$(this).removeClass('unread');
						$("#shortMSG").html($(this).find('td').eq(0).html());
						$("#longMSG").html($(this).attr('longMSG'));
						$('.iconp').hide();
						$('#detail_msg').show();
						$(".fa.fa-arrow-circle-o-left.iconp").show();
				   }
				 },
				//Default is 75px, set to 0 for demo so any distance triggers swipe
				 threshold:0
			});
		}
		
		//Show filter menu
		$('#filter').click(function(){
			$('.vertical_menu').toggle();
		});
		
		//Filter selection logic
		$('.vertical_menu li').click(function(){
			//close the filter menu
			if($(this).hasClass('close_filter')){
				$('.vertical_menu').hide();
			}else
			if($(this).find('i').hasClass('fa-check-square-o')){
				$(this).find('i').removeClass('fa-check-square-o').addClass('fa-square-o');
				$('.message img[src="'+$(this).find('img').attr('src')+'"]').parent().hide();
			}else{
				$(this).find('i').removeClass('fa-square-o').addClass('fa-check-square-o');
				$('.message img[src="'+$(this).find('img').attr('src')+'"]').parent().show();
			}
		});
		
		
		
		makeSwipe();
		
		//scroll and update
		  $('#github_tab').scrollz({pull: true});

		  
		

	</script>
</html>